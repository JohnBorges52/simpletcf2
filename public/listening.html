<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <!-- Mobile-friendly viewport -->
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>TCF Audio Practice</title>

    <!-- App styles -->
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="listening.css" />

    <link
      href="https://fonts.googleapis.com/css?family=Montserrat:400,600|Cardo:400,700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"
    />

    <meta
      name="description"
      content="Practice TCF audio questions with weights, progress tracking, and transcripts."
    />
  </head>

  <body class="quiz--light">
    <!-- Header -->
    <header class="quiz--main_h quiz--sticky" id="mainHeader">
      <div class="quiz--row">
        <a class="quiz--logo" href="/index.html">Simple.TCF</a>

        <button
          class="quiz--mobile-toggle"
          id="navToggle"
          aria-label="Toggle navigation"
          aria-controls="site-nav"
          aria-expanded="false"
          type="button"
        >
          <span></span><span></span><span></span>
        </button>

        <nav id="site-nav" aria-label="Primary">
          <ul>
            <li><a href="/index.html" class="quiz--nav__link">Home</a></li>
            <li>
              <a href="/tcf-exam.html" class="quiz--nav__link">TCF Exam</a>
            </li>
            <li class="quiz--nav__item quiz--nav__dropdown">
              <a
                class="quiz--nav__link quiz--nav__dropdown-toggle"
                aria-haspopup="true"
                aria-expanded="false"
              >
                Practice
                <span class="quiz--nav__caret" aria-hidden="true"></span>
              </a>

              <ul class="quiz--nav__dropdown-menu" role="menu">
                <li role="none">
                  <a
                    role="menuitem"
                    href="/listening.html"
                    class="quiz--nav__link"
                    >Listening</a
                  >
                </li>
                <li role="none">
                  <a
                    role="menuitem"
                    href="/reading.html"
                    class="quiz--nav__link"
                    >Reading</a
                  >
                </li>
                <li role="none">
                  <a
                    role="menuitem"
                    href="/writing.html"
                    class="quiz--nav__link"
                    >Writing</a
                  >
                </li>
              </ul>
            </li>

            <li>
              <a href="/plan.html" class="quiz--nav__link">Plans</a>
            </li>
            <li>
              <a href="#contact-section" class="quiz--nav__link">Contact</a>
            </li>

            <!-- ‚úÖ Auth-controlled nav item (JS will swap Sign In <-> Profile) -->
            <li id="auth-item">
              <a
                id="auth-link"
                href="/login.html"
                class="quiz--nav__link bold-text"
                >Sign In</a
              >
            </li>
          </ul>
        </nav>
      </div>
    </header>

    <div class="quiz--wrap">
      <section aria-labelledby="filters-title" class="quiz--controls">
        <h2 id="filters-title" class="quiz--hidden">Filters</h2>

        <label class="quiz--toggle" for="onlyUnansweredChk">
          <input type="checkbox" id="onlyUnansweredChk" />
          <span>Never responded questions only</span>
        </label>

        <div
          class="quiz--toolbar"
          role="toolbar"
          aria-label="Question weight filters"
        >
          <button
            type="button"
            class="quiz--btn quiz--pill quiz--weight-btn"
            data-all="1"
            id="allBtn"
            onclick="filterQuestions('all')"
          >
            All Weights
          </button>

          <button
            type="button"
            class="quiz--btn quiz--pill quiz--weight-btn"
            onclick="filterQuestions(33)"
          >
            Weight-33
          </button>
          <button
            type="button"
            class="quiz--btn quiz--pill quiz--weight-btn"
            onclick="filterQuestions(26)"
          >
            Weight-26
          </button>
          <button
            type="button"
            class="quiz--btn quiz--pill quiz--weight-btn"
            onclick="filterQuestions(21)"
          >
            Weight-21
          </button>
          <button
            type="button"
            class="quiz--btn quiz--pill quiz--weight-btn"
            onclick="filterQuestions(15)"
          >
            Weight-15
          </button>
          <button
            type="button"
            class="quiz--btn quiz--pill quiz--weight-btn"
            onclick="filterQuestions(9)"
          >
            Weight-09
          </button>
          <button
            type="button"
            class="quiz--btn quiz--pill quiz--weight-btn"
            onclick="filterQuestions(3)"
          >
            Weight-03
          </button>

          <button
            type="button"
            id="deservesBtn"
            class="quiz--btn quiz--pill"
            aria-pressed="false"
          >
            üìö Deserves Attention (0)
          </button>

          <button type="button" id="realTestBtn" class="quiz--btn quiz--pill">
            üß™ Real Test
          </button>
        </div>
      </section>

      <div
        id="realTestLoading"
        class="quiz--hidden"
        role="dialog"
        aria-modal="true"
        aria-label="Loading real test"
      >
        <div class="quiz--loading-backdrop" id="rtBackdrop"></div>

        <div class="quiz--loading-card" role="document">
          <button class="quiz--close-x" id="rtClose" aria-label="Close">
            ‚úï
          </button>

          <div class="spinner-box" aria-hidden="true">
            <div class="circle-border">
              <div class="circle-core"></div>
            </div>
          </div>

          <p id="rtLoadingText" class="quiz--loading-text quiz--loading-flash">
            Preparing Test...
          </p>

          <button
            id="startRealTestBtn"
            type="button"
            class="quiz--btn quiz--pill quiz--start-btn"
            disabled
          >
            Start the test
          </button>
        </div>
      </div>

      <section
        id="realTestContainer"
        class="quiz--hidden"
        aria-labelledby="realtest-title"
      >
        <h2 id="realtest-title" class="quiz--hidden">Real Test</h2>

        <div
          id="questionNav"
          class="quiz--question-nav"
          aria-label="Question navigation dots"
        ></div>

        <div class="quiz--test-controls" role="group" aria-label="Finish test">
          <button
            id="finishRealTestBtn"
            type="button"
            class="quiz--btn quiz--pill padding-space"
          >
            Finish Test
          </button>
        </div>
      </section>

      <main
        id="quiz"
        class="quiz--hidden quiz--card"
        role="main"
        aria-labelledby="questionNumber"
      >
        <div class="quiz--meta">
          <div class="quiz--kpi">
            <span id="questionNumber" role="heading" aria-level="2"></span>
          </div>
        </div>

        <div
          id="pictureContainer"
          class="quiz--media quiz--image quiz--hidden"
          aria-hidden="true"
        ></div>

        <audio
          id="audio"
          class="quiz--audio"
          controls
          aria-label="Question audio"
        ></audio>

        <div
          id="alternatives"
          class="quiz--choices"
          role="group"
          aria-label="Answer choices"
        ></div>

        <button
          type="button"
          id="confirmBtn"
          class="quiz--btn quiz--pill quiz--hidden"
        >
          ‚úÖ Confirm
        </button>

        <div
          class="quiz--nav quiz--nav-bottom"
          role="group"
          aria-label="Question navigation"
        >
          <button type="button" class="quiz--btn" onclick="prevQuestion()">
            ‚Üê Previous
          </button>
          <button type="button" class="quiz--btn" onclick="nextQuestion()">
            Next ‚Üí
          </button>
        </div>

        <div class="quiz--meta">
          <div class="quiz--kpi">
            <span id="score" class="quiz--score" aria-live="polite"></span>
          </div>
        </div>

        <div id="transcriptContainer" class="quiz--transcript">
          <button
            type="button"
            id="transcriptBtn"
            class="quiz--btn quiz--pill"
            onclick="loadTranscript()"
          >
            Transcript
          </button>
          <div id="transcriptText"></div>
        </div>
      </main>

      <section
        id="realTestResults"
        class="quiz--hidden"
        aria-labelledby="results-title"
      >
        <h2 id="results-title" class="quiz--hidden">Results</h2>

        <div id="resultsHeader"></div>

        <div id="clbTable" class="quiz--clb-table"></div>

        <div id="resultsDots" class="quiz--results-dots"></div>

        <div class="quiz--again-wrap">
          <button
            id="againBtn"
            type="button"
            class="quiz--btn quiz--pill padding-space"
          >
            üîÅ Do another Real Test
          </button>
        </div>

        <div id="allQuestionsReview"></div>
      </section>

      <noscript>
        <p><strong>JavaScript is required</strong> to run this practice app.</p>
      </noscript>

      <!-- Firebase config FIRST (regular script, loads immediately) -->
      <script src="firebase-config.js"></script>
      <!-- Then Firebase initialization as module -->
      <script type="module" src="config.js"></script>
      <!-- Then app scripts -->
      <script src="script.js" defer></script>
      <script src="listening.js" defer></script>
    </div>
  </body>
</html>
